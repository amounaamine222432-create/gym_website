<div class="container py-4">

  <h2 class="fw-bold mb-4 text-center">ğŸ‹ï¸â€â™‚ï¸ Mes Cours</h2>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
  </div>

  <div class="row g-4">

    <div class="col-md-4" *ngFor="let cours of tousCours">

      <div class="card shadow-sm h-100 border-0 rounded-4 overflow-hidden">

        <img [src]="cours.photo"
             alt="{{ cours.titre }}"
             class="card-img-top"
             style="height:190px; object-fit:cover;">

        <div class="card-body">
          <h5 class="card-title fw-bold">{{ cours.titre }}</h5>
          <p class="text-muted small">{{ cours.categorie }} â€¢ {{ cours.niveau }}</p>
          <p class="card-text" style="height: 70px; overflow: hidden;">
            {{ cours.description }}
          </p>
        </div>

        <div class="card-footer bg-white border-0 pb-4 text-center">

          <button *ngIf="!estInscrit(cours.id)"
                  class="btn btn-success px-4 rounded-pill"
                  (click)="participer(cours.id)">
            Participer âœ“
          </button>

          <div *ngIf="estInscrit(cours.id)">
            <button class="btn btn-primary px-4 rounded-pill me-2"
        (click)="openCoachsModal(cours)">
  Choisir Coach ğŸ‘¨â€ğŸ«
</button>


            <button class="btn btn-danger px-4 rounded-pill"
                    (click)="quitter(cours.id)">
              Quitter âœ•
            </button>
          </div>

        </div>

      </div>

    </div>
  </div>
</div>


<!-- ============================= -->
<!-- ğŸ”¥ MODAL BOOTSTRAP : COACHS -->
<!-- ============================= -->

<div class="modal" id="coachModal" tabindex="-1" style="display:none;background:rgba(0,0,0,.6);">
  <div class="modal-dialog modal-lg">
    <div class="modal-content rounded-4 shadow-lg">

      <div class="modal-header">
        <h5 class="modal-title fw-bold">Choisir un coach pour : {{ selectedCours?.titre }}</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>

      <div class="modal-body">

        <!-- Liste des coachs -->
        <div class="row g-3">

          <div class="col-md-4" *ngFor="let coach of coachs">
            <div class="card h-100 shadow-sm rounded-4 text-center p-2">

              <img [src]="'assets/coachs/' + coach.photo"
                   class="rounded-circle mb-2"
                   width="90" height="90"
                   style="object-fit:cover;">

              <h6 class="fw-bold">{{ coach.nom }} {{ coach.prenom }}</h6>
              <p class="text-muted small">{{ coach.specialite }}</p>

              <button class="btn btn-outline-primary btn-sm rounded-pill"
                      (click)="choisirCoach(coach.id)">
                Choisir
              </button>

            </div>
          </div>

        </div>

        <hr class="my-4" *ngIf="selectedCoach">

        <!-- Liste des sÃ©ances -->
        <div *ngIf="seances.length > 0">
          <h5 class="fw-bold mb-3">SÃ©ances disponibles</h5>

          <ul class="list-group">
            <li *ngFor="let s of seances" class="list-group-item">
              ğŸ“… {{ s.date }} â€¢ {{ s.heure_debut }} â†’ {{ s.heure_fin }}  
              <span class="badge bg-primary ms-2">{{ s.salle }}</span>
            </li>
          </ul>

        </div>

        <p *ngIf="selectedCoach && seances.length === 0" class="text-center text-muted">
          âŒ Aucune sÃ©ance planifiÃ©e pour ce coach.
        </p>

      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Fermer</button>
      </div>

    </div>
  </div>
</div>
